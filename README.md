App42-Tic-Tac-Toe
===========================

# Runnnig Sample

This is a sample Android gaming app made using App42 backened platform. It uses user, storage ,pushNtification and gaming APIs of App42 platform. 
ere are the few easy steps to run this sample app.


1. [Register] (https://apphq.shephertz.com/register) with App42 platform
2. Create an app once you are on Quickstart page after registeration.
3. Goto dashboard and create a new game TicTacToe Business service manager->game service->add game->)
4. If you are already registered, login to [AppHQ] (http://apphq.shephertz.com) console and create an app from App Manager tab and do step #3 to create a game.
5. To use pushNotification service in your application go to https://code.google.com/apis/console , create a new project here.
6. Than click on service option in google console and enable Google Cloud Messaging for Android service.
7. Than click on API Access option and create a new server key for your application with blank server information.
8. Than Go to AppHQ console and click on Push Notigaction and select Android setting in Settings option.
9. Than select your game and copy the server key that is generated by using google api console , and submit it.
10. Download the eclipse project from this repo and import it in the same.
11. Open Constants.java in sample app and give the value of app42APIkey app42SecretKey that you have received in step 2 or 4
12. Build and Run 



# Design Details:

__Initialize Services:__

Initialization has been done in AsyncApp42ServiceApi.java

```
                ServiceAPI sp = new ServiceAPI(Constants.App42ApiKey,
  			Constants.App42ApiSecret);
		this.userService = sp.buildUserService();
		this.storageService = sp.buildStorageService();
		this.pushService = sp.buildPushNotificationService();
```

__Register User:__ While first time registering in game.

```
              User user = userService.createUser(name, pswd, email);
```
__Authenticate User:__ After logout loging again.

```
             App42Response response = userService.authenticate(
							name, pswd);
```

__Create Game:__ While starting a new game with opponent you have to firt create game.


```
                                final JSONObject gameObject = new JSONObject();
					gameObject.put(Constants.GameFirstUserKey, uname1);
					gameObject.put(Constants.GameSecondUserKey, remoteUserName);
					gameObject.put(Constants.GameStateKey,
							Constants.GameStateIdle);
					gameObject.put(Constants.GameBoardKey,
							Constants.GameIdleState);
					gameObject.put(Constants.GameWinnerKey, "");
					gameObject.put(Constants.GameNextMoveKey, uname1);
					gameObject.put(Constants.GameIdKey, java.util.UUID
							.randomUUID().toString());

					// Insert in to user1's game collection
					storageService.insertJSONDocument(Constants.App42DBName,
							Constants.App42UserGamesCollectionPrefix + uname1,
							gameObject.toString());
					// Insert in to user2's game collection
					storageService.insertJSONDocument(Constants.App42DBName,
							Constants.App42UserGamesCollectionPrefix
									+ remoteUserName, gameObject.toString());
```
